# 分析出力テンプレート

分析スキルの出力ファイル形式の標準テンプレートです。

---

## ubiquitous-language.md テンプレート

```markdown
# ユビキタス言語集

## 概要

[プロジェクトの概要と分析対象の説明]

## 用語定義

### コアドメイン

| 用語（日本語） | 用語（英語） | 定義 | 使用箇所 |
|--------------|------------|------|---------|
| 注文 | Order | 顧客が商品を購入する単位 | Order.ts, OrderService |
| 顧客 | Customer | システムの利用者 | Customer.ts |

### サブドメイン: [ドメイン名]

| 用語（日本語） | 用語（英語） | 定義 | 使用箇所 |
|--------------|------------|------|---------|

## 略語・頭字語

| 略語 | 正式名称 | 説明 |
|-----|---------|------|
| PO | Purchase Order | 発注書 |

## 同義語・類義語マッピング

| 用語A | 用語B | 推奨用語 | 理由 |
|------|------|---------|------|
| ユーザー | 顧客 | 顧客 | ビジネス用語として統一 |
```

---

## actors-roles-permissions.md テンプレート

```markdown
# アクター・ロール・権限

## アクター一覧

### 人間アクター

| アクター | 説明 | 主な操作 |
|---------|------|---------|
| 管理者 | システム全体を管理 | ユーザー管理、設定変更 |
| 一般ユーザー | サービス利用者 | 注文、閲覧 |

### システムアクター

| システム | 説明 | 連携方法 |
|---------|------|---------|
| 決済システム | 外部決済処理 | REST API |

## ロール定義

| ロール | 説明 | 権限セット | コード参照 |
|-------|------|-----------|-----------|
| ADMIN | 管理者ロール | 全権限 | roles/admin.ts |
| USER | 一般ユーザー | 読み取り、注文 | roles/user.ts |

## 権限マトリックス

| 権限 | ADMIN | USER | GUEST |
|------|-------|------|-------|
| ユーザー管理 | ✓ | - | - |
| 注文作成 | ✓ | ✓ | - |
| 商品閲覧 | ✓ | ✓ | ✓ |

## 認証・認可フロー

\`\`\`mermaid
sequenceDiagram
    participant User
    participant App
    participant Auth
    participant API

    User->>App: ログイン要求
    App->>Auth: 認証
    Auth-->>App: JWT発行
    App->>API: API呼び出し（JWT付き）
    API-->>App: レスポンス
\`\`\`
```

---

## domain-code-mapping.md テンプレート

```markdown
# ドメイン-コード対応表

## マッピング概要

[マッピング方針の説明]

## ドメイン別マッピング

### [ドメイン名]

| 概念カテゴリ | 設計書での名称 | コード上の実装 | ファイルパス | 実装パターン |
|------------|--------------|--------------|-------------|-------------|
| エンティティ | 注文 | Order | src/domain/order.ts | DDD Entity |
| 値オブジェクト | 金額 | Money | src/domain/money.ts | Value Object |
| リポジトリ | 注文保存 | OrderRepository | src/repo/order.ts | Repository |
| サービス | 注文処理 | OrderService | src/service/order.ts | Application Service |

## 未マッピング項目

### 設計書にあるがコードにない

| 概念 | 設計書での記載箇所 | 考えられる理由 |
|-----|------------------|--------------|

### コードにあるが設計書にない

| クラス/関数 | ファイルパス | 推測されるドメイン |
|------------|-------------|------------------|
```

---

## system-overview.md テンプレート

```markdown
# 現行システム概要

## 技術スタック

### フロントエンド

| 技術 | バージョン | 用途 |
|-----|----------|------|
| React | 18.x | UI フレームワーク |
| TypeScript | 5.x | 型安全性 |

### バックエンド

| 技術 | バージョン | 用途 |
|-----|----------|------|
| Node.js | 20.x | ランタイム |
| Express | 4.x | Web フレームワーク |

### データベース

| 技術 | バージョン | 用途 |
|-----|----------|------|
| PostgreSQL | 15 | メインDB |

### インフラ

| 技術 | 用途 |
|-----|------|
| Docker | コンテナ化 |
| Kubernetes | オーケストレーション |

## アーキテクチャ概要

\`\`\`mermaid
graph TD
    subgraph "Frontend"
        FE[React App]
    end

    subgraph "Backend"
        API[API Server]
        Worker[Background Worker]
    end

    subgraph "Data"
        DB[(PostgreSQL)]
        Cache[(Redis)]
    end

    FE --> API
    API --> DB
    API --> Cache
    Worker --> DB
\`\`\`

## モジュール構成

| モジュール | 責務 | 依存関係 | ファイル数 |
|----------|------|---------|----------|
| domain | ビジネスロジック | なし | 20 |
| service | アプリケーション層 | domain | 15 |
| repository | データアクセス | domain | 10 |
| api | HTTP API | service | 25 |

## 外部連携

| 連携先 | 連携方式 | 用途 | 実装箇所 |
|-------|---------|------|---------|
| 決済API | REST | 決済処理 | src/external/payment.ts |

## 課題・技術的負債

| 課題 | 深刻度 | 影響範囲 | 推奨対応 |
|-----|-------|---------|---------|
| モノリシック構造 | 高 | 全体 | マイクロサービス化 |
| テスト不足 | 中 | 品質 | テスト追加 |
```
